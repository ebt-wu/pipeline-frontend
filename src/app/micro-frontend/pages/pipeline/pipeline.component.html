<fd-flexible-column-layout [(layout)]="localLayout">
  <ng-template #startColumn>
    <div class="pipeline-container" *ngIf="pipeline$ | async as pipeline; else skeleton">
      <h3 class="heading">Your Pipeline</h3>
      <fd-message-strip type="information">
        For productive usage it is not recommended authenticating with your own user at the pipeline set up.
        <br />
        Request technical user upfront instead.
      </fd-message-strip>
      <fd-card cardType="linkList">
        <fd-card-content>
          <div class="card-content" (click)="openBuildStage()">
            <fd-avatar [colorAccent]="1" size="m" glyph="wrench"></fd-avatar>
            <div class="card-description">
              <h1><strong>Build</strong></h1>
              <p>Get a pipeline that builds and packages your code</p>
            </div>
            <div style="flex-grow: 1"></div>
            <span
              fd-object-status
              status="informative"
              glyph="message-information"
              label="Get technical user"
              aria-label="Get technical user"
              (click)="openTechnicalUserModal($event)"></span>
            <button fd-button fdCozy label="Set Up" fdType="emphasized" (click)="openSetupWizard($event)"></button>
          </div>
          <ul *ngIf="isBuildStageOpen()" fd-list [byline]="true" [noBorder]="true">
            <li fd-list-item *ngFor="let resourceRef of pipeline.resourceRefs" (click)="openDetails(resourceRef.kind)">
              <a fd-list-link>
                <span fd-list-thumbnail>
                  <span
                    fd-object-status
                    *ngIf="resourceRef.status === 'Created'"
                    status="positive"
                    glyph="message-success"></span>
                  <fd-busy-indicator
                    [loading]="true"
                    *ngIf="resourceRef.status === 'PendingCreation'"
                    ariaLabel="loading"
                    title="Please Wait"></fd-busy-indicator>
                  <span
                    fd-object-status
                    *ngIf="resourceRef.status === 'FailingCreation'"
                    status="negative"
                    glyph="message-error"></span>
                  <span fd-object-status *ngIf="resourceRef.status === 'NotFound'" glyph="circle-task"></span>
                </span>
                <div style="display: flex; flex-direction: column">
                  <b>{{ kindCategory[resourceRef.kind] }}</b>
                  <span>{{ kindName[resourceRef.kind] }}</span>
                </div>
              </a>
            </li>
          </ul>
        </fd-card-content>
      </fd-card>
      <fd-card cardType="linkList" class="disabled">
        <fd-card-content>
          <div style="display: flex; justify-content: space-between; align-items: center">
            <div class="card-content">
              <fd-avatar [colorAccent]="10" size="m" glyph="shield"></fd-avatar>
              <div class="card-description">
                <h1><strong>Test</strong></h1>
                <p>Get feedback on the compliance of your code</p>
              </div>
            </div>
            <fd-info-label label="Coming Soon" [color]="10" title="Coming Soon"></fd-info-label>
          </div>
        </fd-card-content>
      </fd-card>
      <fd-card cardType="linkList" class="disabled">
        <fd-card-content>
          <div style="display: flex; justify-content: space-between; align-items: center">
            <div class="card-content">
              <fd-avatar [colorAccent]="10" size="m" glyph="bus-public-transport"></fd-avatar>
              <div class="card-description">
                <h1><strong>Deploy</strong></h1>
                <p>Enable a deployment of your packaged code</p>
              </div>
            </div>
            <fd-info-label fdCozy label="Coming Soon" [color]="10" title="Coming Soon"></fd-info-label>
          </div>
        </fd-card-content>
      </fd-card>
    </div>
    <ng-template #skeleton>
      <div class="pipeline-container">
        <fd-skeleton type="text" width="100px" textLines="2" class="skeleton-text"></fd-skeleton>
        <fd-skeleton type="rectangle" width="100%" height="96px"></fd-skeleton>
        <fd-skeleton type="rectangle" width="100%" height="96px"></fd-skeleton>
        <fd-skeleton type="rectangle" width="100%" height="96px"></fd-skeleton>
      </div>
    </ng-template>
  </ng-template>
  <ng-template #midColumn>
    <h3>Column 2: {{ activeTile }}</h3>
  </ng-template>
</fd-flexible-column-layout>
